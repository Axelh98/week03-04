<%- include('../partials/head') %>
<!-- Incluye el head -->
<%- include('../partials/header') %>
<!-- Incluye el header -->
<%- include('../partials/sidebar') %>

<main class="col-md-9 ms-sm-auto col-lg-10 px-4">

    <% if (message) { %>
        <div class="alert alert-info">
          <%= message %>
        </div>
      <% } %>


      <div class="row">
        <% habits.forEach((habit, index) => { %>
            <div class="col-md-3 mb-4"> <!-- 3 columns of width (4 per row) -->
                <div class="card h-100"> <!-- height full to align uniformly -->
                    <div class="card-body">
                        <h5 class="card-title"><%= habit.name %></h5>
                        <p class="card-text"><%= habit.description %></p>
                        <p class="card-text"><strong>Category:</strong> <%= habit.category %></p>
                        <p class="card-text"><strong>Start:</strong> <%= habit.startDate.toDateString() %></p>
                        <form action="/habits/edit/<%= habit._id %>" method="get" class="d-inline">
                            <button type="submit" class="btn btn-primary btn-sm">Editar</button>
                        </form>
                        <form action="/habits/delete/<%= habit._id %>" method="POST" class="d-inline">
                            <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('¿Estás seguro de eliminar este hábito?')">Eliminar</button>
                        </form>
                    </div>
                </div>
            </div>

            <% if ((index + 1) % 4 === 0) { %>
                </div><div class="row"> <!-- close the current row and open a new one -->
            <% } %>
        <% }) %>
    </div>
    
    <a href="/habits/create" class="btn btn-primary">
        <i class="bi bi-plus-circle"></i> Crear Nuevo Hábito
    </a>
      

</main>

